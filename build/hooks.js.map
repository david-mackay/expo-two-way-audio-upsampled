{"version":3,"file":"hooks.js","sourceRoot":"","sources":["../src/hooks.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,oBAAoB,EAAE,MAAM,mBAAmB,CAAC;AACzD,OAAO,EAAE,SAAS,EAAE,oBAAoB,EAAE,MAAM,OAAO,CAAC;AACxD,OAAO,EACL,6BAA6B,EAC7B,WAAW,EACX,iCAAiC,GAClC,MAAM,QAAQ,CAAC;AAChB,OAAO,EAA2B,+BAA+B,EAAE,MAAM,UAAU,CAAC;AAEpF,MAAM,CAAC,MAAM,wBAAwB,GAAG,oBAAoB,CAAC;IAC3D,SAAS,EAAE,6BAA6B;IACxC,aAAa,EAAE,iCAAiC;CACjD,CAAC,CAAC;AAEH,MAAM,UAAU,cAAc;IAC5B,MAAM,SAAS,GAAG,CAAC,EAAc,EAAE,EAAE;QACnC,MAAM,GAAG,GAAG,+BAA+B,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;QACrE,OAAO,GAAG,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IAC5B,CAAC,CAAC;IACF,MAAM,WAAW,GAAG,GAAG,EAAE,CAAC,WAAW,EAAE,CAAC;IACxC,MAAM,iBAAiB,GAAG,GAAG,EAAE,CAAC,KAAK,CAAC;IAEtC,OAAO,oBAAoB,CAAC,SAAS,EAAE,WAAW,EAAE,iBAAiB,CAAC,CAAC;AACzE,CAAC;AAED,MAAM,UAAU,+BAA+B,CAC7C,SAAY,EACZ,QAAkD;IAElD,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,GAAG,GAAG,+BAA+B,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;QACjE,OAAO,GAAG,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IAC5B,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;AACjB,CAAC","sourcesContent":["import { createPermissionHook } from \"expo-modules-core\";\nimport { useEffect, useSyncExternalStore } from \"react\";\nimport {\n  getMicrophonePermissionsAsync,\n  isRecording,\n  requestMicrophonePermissionsAsync,\n} from \"./core\";\nimport { ExpoTwoWayAudioEventMap, addExpoTwoWayAudioEventListener } from \"./events\";\n\nexport const useMicrophonePermissions = createPermissionHook({\n  getMethod: getMicrophonePermissionsAsync,\n  requestMethod: requestMicrophonePermissionsAsync,\n});\n\nexport function useIsRecording() {\n  const subscribe = (cb: () => void) => {\n    const sub = addExpoTwoWayAudioEventListener(\"onRecordingChange\", cb);\n    return () => sub.remove();\n  };\n  const getSnapshot = () => isRecording();\n  const getServerSnapshot = () => false;\n\n  return useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);\n}\n\nexport function useExpoTwoWayAudioEventListener<K extends keyof ExpoTwoWayAudioEventMap>(\n  eventName: K,\n  listener: (ev: ExpoTwoWayAudioEventMap[K]) => void,\n) {\n  useEffect(() => {\n    const sub = addExpoTwoWayAudioEventListener(eventName, listener);\n    return () => sub.remove();\n  }, [listener]);\n}\n"]}